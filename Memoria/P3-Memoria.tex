%%
% Plantilla de Memoria
% Modificación de una plantilla de Latex de Nicolas Diaz para adaptarla 
% al castellano y a las necesidades de escribir informática y matemáticas.
%
% Editada por: Mario Román
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%%

%%%%%%%%%%%%%%%%%%%%%
% Thin Sectioned Essay
% LaTeX Template
% Version 1.0 (3/8/13)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original Author:
% Nicolas Diaz (nsdiaz@uc.cl) with extensive modifications by:
% Vel (vel@latextemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PAQUETES Y CONFIGURACIÓN DEL DOCUMENTO
%----------------------------------------------------------------------------------------

%% Configuración del papel.
% microtype: Tipografía.
% mathpazo: Usa la fuente Palatino.
\documentclass[a4paper, 11pt]{article}
\usepackage[protrusion=true,expansion=true]{microtype}
\usepackage{mathpazo}

% Indentación de párrafos para Palatino
\setlength{\parindent}{0pt}
  \parskip=8pt
\linespread{1.05} % Change line spacing here, Palatino benefits from a slight increase by default


%% Castellano.
% noquoting: Permite uso de comillas no españolas.
% lcroman: Permite la enumeración con numerales romanos en minúscula.
% fontenc: Usa la fuente completa para que pueda copiarse correctamente del pdf.
\usepackage[spanish,es-noquoting,es-lcroman]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\selectlanguage{spanish}


%% Gráficos
\usepackage{graphicx} % Required for including pictures
\usepackage{wrapfig} % Allows in-line images
\usepackage[usenames,dvipsnames]{color} % Coloring code

% % Enlaces
\usepackage[hidelinks]{hyperref}

%% Matemáticas
\usepackage{amsmath}

% Para algoritmos
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{amsthm}
\input{spanishAlgorithmic.tex}

%% Bibliografía
\makeatletter
\renewcommand\@biblabel[1]{\textbf{#1.}} % Change the square brackets for each bibliography item from '[1]' to '1.'
\renewcommand{\@listI}{\itemsep=0pt} % Reduce the space between items in the itemize and enumerate environments and the bibliography


%----------------------------------------------------------------------------------------
%	TÍTULO
%----------------------------------------------------------------------------------------
% Configuraciones para el título.
% El título no debe editarse aquí.
\renewcommand{\maketitle}{
  \begin{flushright} % Center align
  {\LARGE\@title} % Increase the font size of the title
  
  \vspace{50pt} % Some vertical space between the title and author name
  
  {\large\@author} % Author name
  \\\@date % Date
  \vspace{40pt} % Some vertical space between the author block and abstract
  \end{flushright}
}

% Título
\title{\textbf{Metaheurísticas: Selección de Características}\\ % Title
P-3: Algoritmos Genéticos} % Subtitle

\author{\textsc{Óscar Bermúdez Garrido\\
\href{http://www.github.com/oxcar103}{@oxcar103}} % Author
\\{\textit{Universidad de Granada}}} % Institution

\date{\today} % Date


%----------------------------------------------------------------------------------------
%	DOCUMENTO
%----------------------------------------------------------------------------------------

\begin{document}

\maketitle % Print the title section

% Resumen (Descomentar para usarlo)
\renewcommand{\abstractname}{Resumen} % Uncomment to change the name of the abstract to something else
%\begin{abstract}
% Resumen aquí
%\end{abstract}

% Palabras clave
%\hspace*{3,6mm}\textit{Keywords:} lorem , ipsum , dolor , sit amet , lectus % Keywords
%\vspace{30pt} % Some vertical space between the abstract and first section


% Índice
{\parskip=2pt
  \tableofcontents
}
\pagebreak

%% Inicio del documento
	\input{Introducción.tex}
	\input{CaracterísticasComunes.tex}
	
	\section{Heurísticas implementadas}\footnote{En la implementación de las heurísticas desarrolladas
	en esta práctica, se utilizan la búsqueda de soluciones por la heurística \textbf{SFS} para comparar
	los resultados obtenidos y las optimizaciones de la \textbf{LS} para mejorar los resultados obtenidos
	por estas nuevas heurísticas multiarranque. Dado que ya se explicaron en \textbf{P1-Memoria}, he
	considerado ahorrar su explicación en este documento para permitir una mayor limpieza del mismo.}
	
		\subsection{Algoritmos Genéticos}
			\begin{algorithm}[H]
				\begin{algorithmic}[1]
				\REQUIRE \ \\
						 \
			 
				\STATE{i = 0}
				\STATE{\texttt{Índice\_Mejor}}
				\FOR{\texttt{i} $<$ \texttt{Población}}
					\STATE{\texttt{Padres}.add(RandomSolution())}
					\IF{\texttt{Padres[Índice\_Mejor]} < \texttt{Padres[i]}}
						\STATE{\texttt{Índice\_Mejor} = i}
					\ENDIF
				\ENDFOR
				
				\WHILE{\texttt{Evaluaciones} < 15000}
					\STATE{Limpiamos \texttt{Hijos}}
					\STATE{\texttt{Padres\_Seleccionados} = Selection()}
					\STATE{i = 0}
					\FOR{i < $\displaystyle \frac{\texttt{Padres\_Seleccionados}.size()}{2}$}
						\STATE{Crossover(2 $\cdot$ i, 2 $\cdot$ i+1)}
					\ENDFOR
					\STATE{Mutation()}
					\STATE{Inheritance()}
				\ENDWHILE
				
				\STATE{\texttt{Solución\_actual = Padres[Índice\_Mejor]}}
				\end{algorithmic}
			\caption{Algoritmos Genéticos - Entrenamiento(\textit{Train})}
			\label{GA-Train}
			\end{algorithm}
			
			\begin{algorithm}[H]
				\begin{algorithmic}[1]
				\REQUIRE \ \\
						 \
					
				\STATE{\texttt{Candidato\_1} = Genera valor aleatorio entre 0 y \texttt{Población}-1}
				\STATE{\texttt{Candidato\_2} = Genera valor aleatorio entre 0 y \texttt{Población}-1}
				
				\WHILE{\texttt{Candidato\_1} == \texttt{Candidato\_2}}
					\STATE{\texttt{Candidato\_2} = Genera valor aleatorio entre 0 y \texttt{Población}-1}
				\ENDWHILE
				\IF{Evaluate(\texttt{Padres[Candidato\_1]}) > Evaluate(\texttt{Padres[Candidato\_2]})}
					\RETURN{\texttt{Candidato\_1}}
				\ELSE
					\RETURN{\texttt{Candidato\_2}}
				\ENDIF
				\STATE{\texttt{Solución\_actual = Padres[Índice\_Mejor]}}
				\end{algorithmic}
			\caption{Algoritmos Genéticos - Torneo Binario(\textit{BinaryTournament})}
			\label{GA-BT}
			\end{algorithm}
			
			
			\begin{algorithm}[H]
				\begin{algorithmic}[1]
				\REQUIRE \ \\
						\texttt{Padre\_1}, un padre \\
						\texttt{Padre\_2}, el otro \\ \
						
				\STATE{\texttt{Primero} = Genera valor aleatorio entre 0 y \texttt{Número\_Características}-1}
				\STATE{\texttt{Segundo} = Genera valor aleatorio entre 0 y \texttt{Número\_Características}-1}
				
				\WHILE{\texttt{Segundo} == \texttt{Primero}}
					\STATE{\texttt{Segundo} = Genera valor aleatorio entre 0 y \texttt{Número\_Características}-1}
				\ENDWHILE
				
				\IF{\texttt{Primero} > \texttt{Segundo}}
					\STATE{swap(\texttt{Primero, Segundo})}
				\ENDIF
				
				\STATE{i = 0}
				\FOR{i < \texttt{Número\_Características}}
					\IF{i < \texttt{Primero}}
						\STATE{\texttt{Hijo\_1}[i] = \texttt{Padre\_1}[i]}
						\STATE{\texttt{Hijo\_2}[i] = \texttt{Padre\_2}[i]}
					\ELSIF{i < \texttt{Segundo}}
						\STATE{\texttt{Hijo\_1}[i] = \texttt{Padre\_2}[i]}
						\STATE{\texttt{Hijo\_2}[i] = \texttt{Padre\_1}[i]}
					\ELSE
						\STATE{\texttt{Hijo\_1}[i] = \texttt{Padre\_1}[i]}
						\STATE{\texttt{Hijo\_2}[i] = \texttt{Padre\_2}[i]}
					\ENDIF
				\ENDFOR
				
				\STATE{\texttt{Hijos}.add{\texttt{Hijo\_1}}}
				\STATE{\texttt{Hijos}.add{\texttt{Hijo\_2}}}
				\end{algorithmic}
			\caption{Algoritmos Genéticos - Cruce(\textit{Crossover})}
			\label{GA-Cross}
			\end{algorithm}
			
		\subsection{Algoritmo Genético Gerenacional (\textbf{GGA})}
			
%			exp_cross = (int) (getCross_prob() * getPopulation() / 2);
%			exp_mut = (int) (getMut_prob() * getTotal_gens());
			
			
			\begin{algorithm}[H]
				\begin{algorithmic}[1]
				\REQUIRE \ \\
						 \
						
				\WHILE{\texttt{Padres\_Seleccionados}.size() < \texttt{Número\_de\_Cruces}}
					\STATE{\texttt{Candidato} = BinaryTournament}
					\IF{\texttt{Candidato} $\notin$ \texttt{Padres\_Seleccionados}}
						\STATE{\texttt{Padres\_Seleccionados}.add(\texttt{Candidato})}
					\ENDIF
				\ENDWHILE
				
				\RETURN{\texttt{Padres\_Seleccionados}}
				\end{algorithmic}
			\caption{AG Generacional - Selección(\textit{Selection})}
			\label{GGA-Selec}
			\end{algorithm}
			
			
			\begin{algorithm}[H]
				\begin{algorithmic}[1]
				\REQUIRE \ \\
						 \
						
				\STATE{i = 0}
				\FOR{i < \texttt{Población}}
%			        // Add parents that don't crossover
					\IF{i $\notin$ \texttt{Padres\_Seleccionados}}
						\STATE{\texttt{Hijos}.add(\texttt{Padres}[i])}
					\ENDIF
				\ENDFOR
				\WHILE{\texttt{Genes\_Mutados}.size() < \texttt{Número\_de\_Mutaciones}}
					\STATE{\texttt{Gen} = Genera valor aleatorio entre 0 y (\texttt{Población} $\times$
							\texttt{Número\_de\_Características})-1}
					\STATE{\texttt{Solución} = $\displaystyle \frac{\texttt{Gen}}{\texttt{Número\_de\_Características}}$}
					\STATE{\texttt{Característica} = \texttt{Gen} $\mod{\texttt{Número\_de\_Características}}$}
					
					\IF{\texttt{Gen} $\notin$ \texttt{Genes\_Mutados}}
						\STATE{\texttt{Genes\_Mutados}.add(\texttt{Gen})}
						
						\IF{\texttt{Solución} $\notin$ \texttt{Soluciones\_Mutadas}}
							\STATE{\texttt{Soluciones\_Mutadas}.add(\texttt{Solución})}
						\ENDIF
						
						\STATE{\texttt{Solución}.Flip(\texttt{Gen})}
					\ENDIF
				\ENDWHILE
				\end{algorithmic}
			\caption{AG Generacional - Mutación(\textit{Mutation})}
			\label{GGA-Mut}
			\end{algorithm}
			
			
			\begin{algorithm}[H]
				\begin{algorithmic}[1]
				\REQUIRE \ \\
						 \
						
				\STATE{\texttt{Índice\_Peor} = 0}
				\STATE{i = 0}
				\FOR{i < \texttt{Población}}
					\IF{Evaluate(\texttt{Hijos[i]}) < Evaluate(\texttt{Hijos[Índice\_Peor]})}
						\STATE{\texttt{Índice\_Peor} = i}
					\ENDIF
				\ENDFOR
				
				\STATE{\texttt{Hijos[Índice\_Peor]} = \texttt{Padres[Índice\_Mejor]}}
				\STATE{\texttt{Índice\_Mejor} = \texttt{Índice\_Peor}}
				\STATE{\texttt{Padres} = \texttt{Hijos}}
				
				\STATE{i = 0}
				\FOR{i < \texttt{Población}}
					\IF{Evaluate(\texttt{Padres[i]}) > Evaluate(\texttt{Padres[Índice\_Mejor]})}
						\STATE{\texttt{Índice\_Mejor} = i}
					\ENDIF
				\ENDFOR
				\end{algorithmic}
			\caption{AG Generacional - Reemplazo(\textit{Inheritance})}
			\label{GGA-Inher}
			\end{algorithm}
			
			
		\subsection{Algoritmo Genético Estacionario (\textbf{SSGA})}
			
			
			\begin{algorithm}[H]
				\begin{algorithmic}[1]
				\REQUIRE \ \\
						 \
				
				\WHILE{\texttt{Padres\_Seleccionados}.size() < \texttt{Número\_de\_Hijos}}
					\STATE{\texttt{Candidato} = BinaryTournament()}
					\IF{\texttt{Candidato} $\notin$ \texttt{Padres\_Seleccionados}}
						\STATE{\texttt{Padres\_Seleccionados}.add(\texttt{Candidato})}
					\ENDIF
				\ENDWHILE
				
				\RETURN{\texttt{Padres\_Seleccionados}}
				\end{algorithmic}
			\caption{AG Estacionario - Selección(\textit{Selection})}
			\label{SSGA-Selec}
			\end{algorithm}
			
			
			
		
	\section{Resultados}\footnote{En este documento, se comparan los resultados obtenidos por las
	heurísticas desarrolladas en esta práctica con la búsqueda de soluciones por la heurística
	\textbf{SFS} cuyos resultados ya se expusieron en \textbf{P1-Memoria}, por lo que también he
	obviado su inclusión en este documento en toda su extensión mas sí han sido incluidas las medias
	de ejecución en la tabla comparativa.}
		\subsection{Algoritmo Genético Gerenacional (\textbf{GGA})}
			\input{WDBC-GGA}
			\input{MLIB-GGA}
			\input{ARRH-GGA}
		\subsection{Algoritmo Genético Estacionario (\textbf{SSGA})}
			\input{WDBC-SSGA}
			\input{MLIB-SSGA}
			\input{ARRH-SSGA}
			
		\subsection{Comparación de resultados}
			\input{Compare-3}
			
	\input{Compilación.tex}
	\newpage
	
	\begin{thebibliography}{10}
	\expandafter\ifx\csname url\endcsname\relax
	  \def\url#1{\texttt{#1}}\fi
	\expandafter\ifx\csname urlprefix\endcsname\relax\def\urlprefix{URL }\fi
	\expandafter\ifx\csname href\endcsname\relax
	  \def\href#1#2{#2} \def\path#1{#1}\fi
	
	\bibitem{KNN}
	WEKA (The University of Waikato)\\
	  \url{http://weka.sourceforge.net/doc.dev/weka/classifiers/lazy/IBk.html}\\
	  \url{http://weka.sourceforge.net/doc.dev/weka/core/neighboursearch/NearestNeighbourSearch.html}
	  
  	\bibitem{ARFFReader}
  	WEKA (The University of Waikato)\\
	  \url{http://weka.sourceforge.net/doc.dev/weka/core/converters/ArffLoader.ArffReader.html}
	  
	\end{thebibliography}

\end{document}
